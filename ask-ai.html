<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ask AI - Mistireselassie W.</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .chat-container {
      width: 90%;
      max-width: 600px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .chat-header {
      padding: 15px;
      background: #111;
      color: white;
      font-weight: bold;
      text-align: center;
    }
    .chat-messages {
      padding: 15px;
      flex: 1;
      overflow-y: auto;
      background: #fafafa;
    }
    .msg {
      margin: 8px 0;
      padding: 10px 14px;
      border-radius: 18px;
      max-width: 80%;
      line-height: 1.4em;
    }
    .msg.user {
      background: #007bff;
      color: white;
      margin-left: auto;
      border-bottom-right-radius: 4px;
    }
    .msg.bot {
      background: #e5e5ea;
      color: #333;
      margin-right: auto;
      border-bottom-left-radius: 4px;
    }
    .chat-input {
      display: flex;
      border-top: 1px solid #ddd;
    }
    .chat-input input {
      flex: 1;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 0;
      outline: none;
    }
    .chat-input button {
      background: #007bff;
      color: white;
      border: none;
      padding: 0 20px;
      cursor: pointer;
      font-size: 16px;
    }
    .chat-input button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="chat-header">Ask AI about my services</div>
    <div id="messages" class="chat-messages"></div>
    <div class="chat-input">
      <input id="question" type="text" placeholder="Type your question...">
      <button onclick="askAI()">Ask</button>
    </div>
  </div>

  <script>
    // --- Knowledge Base (expand in knowledge.json if external) ---
    const knowledge = {
      "branding": "Branding is the process of creating a unique identity for your business through logos, colors, and consistent style.",
      "logo": "I design professional and creative logos tailored to your brand identity.",
      "microsoft office": "I provide Microsoft Office support including Word formatting, PowerPoint design, and Excel support.",
      "pricing": "Pricing depends on the project. Logo packages start affordably and scale depending on complexity. Microsoft Office services are charged per document or slide. Contact me with details for an exact quote.",
      "price": "@pricing",
      "pric": "@pricing",
      "cost": "@pricing",
      "fees": "@pricing",
      "services": "I offer logo design, branding, and Microsoft Office support services.",
      "contact": "You can reach me at changesat2021@gmail.com or WhatsApp +251 919 981 116."
    };

    // --- Helper: resolve aliases ---
    function resolveAlias(key) {
      let value = knowledge[key];
      while (value && value.startsWith("@")) {
        const target = value.slice(1);
        value = knowledge[target];
      }
      return value;
    }

    // --- Helper: fuzzy similarity ---
    function similarity(a, b) {
      a = a.toLowerCase();
      b = b.toLowerCase();
      let matches = 0;
      for (let char of a) {
        if (b.includes(char)) matches++;
      }
      return matches / Math.max(a.length, b.length);
    }

    // --- Main Ask AI function ---
    function askAI() {
      const q = document.getElementById("question").value.toLowerCase().trim();
      const messages = document.getElementById("messages");

      if (!q) return;

      messages.innerHTML += `<div class="msg user">${q}</div>`;

      let answer = "I couldnâ€™t find an exact match, but I can help with logo design, branding, or Microsoft Office services.";
      let bestMatch = null;
      let bestScore = 0;

      for (let key in knowledge) {
        if (q.includes(key)) {
          bestMatch = key;
          bestScore = 1;
          break;
        }
        let score = similarity(q, key);
        if (score > bestScore) {
          bestScore = score;
          bestMatch = key;
        }
      }

      if (bestMatch && bestScore > 0.45) {
        answer = resolveAlias(bestMatch) || knowledge[bestMatch] || answer;
      }

      messages.innerHTML += `<div class="msg bot">${answer}</div>`;
      messages.scrollTop = messages.scrollHeight;

      document.getElementById("question").value = "";
    }

    // Allow pressing Enter
    document.getElementById("question").addEventListener("keypress", function(e) {
      if (e.key === "Enter") askAI();
    });
  </script>
</body>
</html>
